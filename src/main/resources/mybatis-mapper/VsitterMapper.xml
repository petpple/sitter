<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="petpple.kiwi.sitter.repository.IVsitterMapper">

	<!-- 방문 서비스 펫시팅 현황 -->
    <select id="waitingAcceptance" resultType="java.lang.Integer">
    	SELECT COUNT(*) AS COUNT
		FROM VIEW_WAITING_ACCEPTANCE
    </select>
    
    <select id="sumPetsitting" resultType="java.lang.Integer">
    	SELECT COUNT(*) AS COUNT
		FROM VIEW_SUM_PETSITTING
    </select>

	<!-- 위탁 서비스 펫시팅 현황  -->
    <select id="waitingFacceptance" resultType="java.lang.Integer">
    	SELECT COUNT(*) AS COUNT
		FROM VIEW_WAITING_FACCEPTANCE
    </select>
    
    <select id="sumFpetsitting" resultType="java.lang.Integer">
    	SELECT COUNT(*) AS COUNT
		FROM VIEW_SUM_FPETSITTING
    </select>
    
    <select id="currentPetsitting" resultType="Vsitter">
   	<![CDATA[
   	SELECT V_ID AS vid, V_CLI_ADDR AS addr, V_START_DATE AS startDate
	, V_END_DATE AS endDate, V_REQ_DATE AS reqDate, P_TOTAL AS totalPrice
	, MEM_NICKNAME AS petsitterNickname, MEM_IMG AS petsitterProfile  
	FROM MEMBER M JOIN TMP_MEM TM
	ON M.TMP_MEMBER_ID = TM.T_MEM_ID
	JOIN PET_SHARE PS
	ON TM.T_MEM_ID = PS.TMP_MEMBER_ID
	JOIN V_PET_CHO VPC
	ON PS.P_SHA_ID = VPC.P_SHA_ID
	JOIN V V
	ON VPC.V_ID = V.V_ID
	JOIN S_ALLOW SA
	ON V.S_ALL_ID = SA.S_ALL_ID
	JOIN S_APPLY S
	ON SA.S_APP_ID = S.S_APP_ID
	JOIN V_RESERV VR
	ON V.V_ID = VR.V_ID
	JOIN PAY P
	ON P.P_ID = V.PAYMENT_ID
	WHERE TM.T_MEM_ID = 'UV8YF0IN08'
	]]>
    </select>
<!-- 	AND SYSDATE >= V.V_START_DATE -->
<!-- 	AND SYSDATE < V.V_END_DATE -->
  


</mapper>